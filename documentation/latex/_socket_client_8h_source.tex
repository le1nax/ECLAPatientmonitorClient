\doxysection{Socket\+Client.\+h}
\hypertarget{_socket_client_8h_source}{}\label{_socket_client_8h_source}\index{include/SocketClient.h@{include/SocketClient.h}}
\mbox{\hyperlink{_socket_client_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_socket_8h}{Socket.h}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <thread>}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#define\ RECEIVEINTERVAL\ 500\ }\textcolor{comment}{//\ koennen\ den\ receive\ thread\ nicht\ komplett\ durchlaufen\ lassen\ weil\ wir\ keinen\ echten\ Parallelismus\ haben}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_socket_client}{SocketClient}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_u_d_p_socket}{UDPSocket}}\ \{}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_socket_client}{SocketClient}}(std::string\ remoteIPtarget,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ remotePortTarget);}
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_socket_client_ae839cd8b58cb070012264f47e686744c}{\string~SocketClient}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_socket_client_ae3962f762b411e9b4bf06be013c3c9f1}{establishLanConnection}}();}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ SOCKET\ \mbox{\hyperlink{class_socket_client_a0294a111cf7bee7e06ab1199f7ccddd5}{getSocket}}();}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_socket_client_acb57ced432d6c24dbc5ad3d021f62861}{initReceive}}();}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ sockaddr\_in\ \mbox{\hyperlink{class_socket_client_aacec48f332055a07a6729c31c38c71f7}{m\_sa\_remoteIPtarget}};}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{class_socket_client_afdfed263518601d2b48abf6bb070cfab}{Receive}}(\textcolor{keywordtype}{char}*\ buffer,\ \textcolor{keywordtype}{size\_t}\ buffersize\ =\ maxbuffersize,\ \textcolor{keywordtype}{int}\ flags\ =\ 0);}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ std::vector<std::byte>\ \mbox{\hyperlink{class_socket_client_a6b894a72da480a6ec4361a630993453b}{init\_msg}};}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ sendBytes(std::vector<std::byte>\ bytes);}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ ProcessPacket(\textcolor{keywordtype}{char}*\ buffer);}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}*\ m\_lastMsg;}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ lastMsgSize\ =\ 0;}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ std::string\ m\_remoteIPtarget\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ std::string\ m\_strTimestamp\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ std::string\ m\_DeviceID=\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ std::string\ m\_idlabelstring\ =\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ m\_port\ =\ 0;}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ onThreadReceive();}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ std::unique\_ptr<std::thread>\ m\_receiveThread\ \{\textcolor{keyword}{nullptr}\};}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ ConvertToByte(\textcolor{keywordtype}{int}\ value);}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ IsLittleEndian();}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ CALLBACK\ ReceiveCallback(DWORD\ errorCode,\ DWORD\ numBytesReceived,\ LPWSAOVERLAPPED\ overlapped,\ DWORD\ flags\ =\ 0);}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ stopThreadKeepConnectionAlive\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ stopThreadReceive\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ m\_receiveInterval\ =\ \mbox{\hyperlink{_socket_client_8h_a8682a8bde66a6aab34c56b6e7dfb43a3}{RECEIVEINTERVAL}};}
\DoxyCodeLine{00056\ \};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00059\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_receive___state}{Receive\_State}}\ }
\DoxyCodeLine{00060\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_receive___state_a5448ec636f4ea86aad1c2ffc6520d3b2}{Receive\_State}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_receive___state_a890a11302d03ecb22eec49ac39072827}{\string~Receive\_State}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ WSAOVERLAPPED\ \mbox{\hyperlink{class_receive___state_a5d46d932827f8e09fe826b61f424306e}{overlapped}};\ }
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ WSABUF\ \mbox{\hyperlink{class_receive___state_a4ec9c8e650a3ee564cd824553074d66b}{wsaBuf}};}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ sockaddr\_in\ \mbox{\hyperlink{class_receive___state_aab2eabd11f0cd87103752461e6799483}{state\_ip}};}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_receive___state_a83fe4f7e48aafe993c220a01cdf43c39}{numBytesReceived}};}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{long}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_receive___state_a8f326890bd357419138344df156898a4}{numBytesTransferred}};}
\DoxyCodeLine{00070\ \};}

\end{DoxyCode}
